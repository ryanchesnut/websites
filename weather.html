<!--Objective: Build a CodePen.io app that is functionally similar to this: http://codepen.io/FreeCodeCamp/full/bELRjV.

Rule #1: Don't look at the example project's code. Figure it out for yourself.

Rule #2: Fulfill the below user stories. Use whichever libraries or APIs you need. Give it your own personal style.

User Story: I can see the weather in my current location.

User Story: I can see a different icon or background image (e.g. snowy mountain, hot desert) depending on the weather.

User Story: I can push a button to toggle between Fahrenheit and Celsius.

Note: Many internet browsers now require an HTTP Secure (https://) connection to obtain a user's locale via HTML5 Geolocation. For this reason, we recommend using HTML5 Geolocation to get user location and then use the freeCodeCamp Weather API https://fcc-weather-api.glitch.me which uses an HTTP Secure connection for the weather. Also, be sure to connect to CodePen.io via https://.

Remember to use Read-Search-Ask if you get stuck.

When you are finished, click the "I've completed this challenge" button and include a link to your CodePen.

You can get feedback on your project by sharing it with your friends on Facebook.

-->


<html> 
<head>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
    crossorigin="anonymous">
<style>
	#main{
		margin: 25%;
		text-align: center; 
		padding: 5%;
		background-color: #d7e0ef;
	}
	footer{
		text-align: center;
	}

</style>
	
	
	
</head>

<body>
	<div id="main"> 
		My Location:
		<div id="location"></div>
		Weather: <span id="summary"></span><br/>
		Temperature: <span id="temperature"></span><br/> 
		<button onclick="convertTemp()"> Convert</button><br/>
		Icon: <span id="icon"></span><br/>
			<div id="current-weather"></div>
	</div>
	<footer>
		<a href="https://darksky.net/poweredby/">Powered by Dark Sky</a>
	</footer>
	<!--<div class="div1"></div>-->
</body>
	
	
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>

<script>

    var latitude = 0;
    var longitude = 0;
	var time = 0; 
	var currentWeather = ""; 
	var tempF = 0; 
	var tempC = 0; 
	var icon = ""; 
	var summary = "";
	var switchTemp = false; 
	
	var x = document.getElementById("location");
	function getLocation() {
    	if (navigator.geolocation) {
        	navigator.geolocation.getCurrentPosition(showPosition);
    	} else { 
			x.innerHTML = "Geolocation is not supported by this browser.";
		}
	}
	
	//clear-day, clear-night, rain, snow, sleet, wind, fog, cloudy, partly-cloudy-day, or partly-cloudy-night. (Developers should ensure that a sensible default is defined, as additional values, such as hail, thunderstorm, or tornado,
	
	
	function convertTemp(){
		if (!this.switchTemp){
			$("#temperature").html(tempC); 
			this.switchTemp = true; 
		}
		else {
			$("#temperature").html(tempF); 
			this.switchTemp = false; 
		}
	}
	
/*	function findIcon(icon){
		switch(icon){
			case :
				$().html();
			break; 
				
		}
		
		
	}
*/
	function showPosition(position) {
		latitude  = position.coords.latitude;
		longitude = position.coords.longitude;
		x.innerHTML = "Latitude: " + position.coords.latitude + 
		"<br>Longitude: " + position.coords.longitude;
		$.ajax({url: "http://maps.googleapis.com/maps/api/geocode/json?latlng=" + + latitude + "," + longitude +"&sensor=true", success: function(result){
				console.log(JSON.stringify(result))
			}
		});	
		
		$.ajax({url: "https://cors-anywhere.herokuapp.com/https://api.darksky.net/forecast/ad05c050b7e9cd675a967d66e5b8452b/"+ latitude + "," + longitude + "?exclude=flags,alerts,minutely,hourly,daily" , success: function(result){
				parseResults(result); 
			}
		});
	}
	function displayResults(){
		$("#current-weather").html(currentWeather); 
		$("#summary").html(summary); 
		$("#temperature").html(tempF.replace( /"/g , " " ));
		$("#icon").html(icon);
	}
	
	function parseResults(result){
			currentWeather = result["currently"]; 
			tempF = Math.round(currentWeather["temperature"]) + '&degF';
			tempC = Math.round((currentWeather["temperature"] - 32) / 1.8) + '&degC';
			icon = currentWeather["icon"]; 
			summary = currentWeather["summary"]; 
			
			this.displayResults(); 

	}
	
		$(document).ready(function(){
			getLocation(); 

	});

	
</script>
	
	

</html>